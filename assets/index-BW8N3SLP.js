import{r as e,a as s,R as t}from"./vendor-BXk_ma1u.js";import{i as a,g as r,a as l,b as o,o as n,d as i,c,s as d,e as u,q as m,w as x,f as h,h as g,r as b,j as p,k as f,l as y,m as j,n as v,p as N,t as w,G as k,u as C,v as S,x as M,y as E,z as q,A as z,B,C as I}from"./firebase-B-EQ4ZSO.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)}).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();var P={exports:{}},$={},L=e,R=Symbol.for("react.element"),D=Symbol.for("react.fragment"),F=Object.prototype.hasOwnProperty,V=L.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_={key:!0,ref:!0,__self:!0,__source:!0};function U(e,s,t){var a,r={},l=null,o=null;for(a in void 0!==t&&(l=""+t),void 0!==s.key&&(l=""+s.key),void 0!==s.ref&&(o=s.ref),s)F.call(s,a)&&!_.hasOwnProperty(a)&&(r[a]=s[a]);if(e&&e.defaultProps)for(a in s=e.defaultProps)void 0===r[a]&&(r[a]=s[a]);return{$$typeof:R,type:e,key:l,ref:o,props:r,_owner:V.current}}$.Fragment=D,$.jsx=U,$.jsxs=U,P.exports=$;var O=P.exports,A={},T=s;A.createRoot=T.createRoot,A.hydrateRoot=T.hydrateRoot;
/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
var J={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=(s,t)=>{const a=e.forwardRef(({color:a="currentColor",size:r=24,strokeWidth:l=2,absoluteStrokeWidth:o,className:n="",children:i,...c},d)=>{return e.createElement("svg",{ref:d,...J,width:r,height:r,stroke:a,strokeWidth:o?24*Number(l)/Number(r):l,className:["lucide",`lucide-${u=s,u.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim()}`,n].join(" "),...c},[...t.map(([s,t])=>e.createElement(s,t)),...Array.isArray(i)?i:[i]]);var u});return a.displayName=`${s}`,a},Q=H("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),G=H("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]),X=H("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]),W=H("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Z=H("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),K=H("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Y=H("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]),ee=H("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]),se=H("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]),te=H("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0",key:"aigmz7"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v2",key:"1n6bmn"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v8",key:"a9iiix"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]),ae=H("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]),re=H("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),le=H("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),oe=H("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),ne=H("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),ie=H("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]),ce=H("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),de=H("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]),ue=H("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),me=H("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),xe=H("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),he=H("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),ge=H("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),be=H("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),pe=H("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),fe=H("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ye=a("undefined"!=typeof __firebase_config?JSON.parse(__firebase_config):{apiKey:"AIzaSyB_My_YilDOcQ7sFtlCXIVPFCqXInx5iMI",authDomain:"chatdmensagens.firebaseapp.com",databaseURL:"https://chatdmensagens-default-rtdb.firebaseio.com",projectId:"chatdmensagens",storageBucket:"chatdmensagens.firebasestorage.app",messagingSenderId:"247264688276",appId:"1:247264688276:web:4a54453ca17d8cf0945c81",measurementId:"G-0MSQBFP1PJ"}),je=r(ye),ve=l(ye),Ne=o(ye),we=e.createContext(),ke=({children:s})=>{const[t,a]=e.useState(null),[r,l]=e.useState(!0);e.useEffect(()=>{const e=n(je,async e=>{if(e){const s=i(ve,"users",e.uid),t=await c(s);if(t.exists())a({...e,...t.data()});else{const t={uid:e.uid,displayName:e.displayName,email:e.email,photoURL:e.photoURL,recado:"OlÃ¡! Estou usando o ChatD.",createdAt:u()};await d(s,t),a({...e,...t})}}else a(null);l(!1)});return()=>e()},[]);const o=e.useMemo(()=>({user:t,loading:r}),[t,r]);return O.jsx(we.Provider,{value:o,children:s})},Ce=()=>e.useContext(we),Se=({text:e="Carregando aplicativo..."})=>O.jsxs("div",{className:"flex flex-col items-center justify-center h-full w-full bg-gray-900 p-4 text-white text-center",children:[O.jsx(ae,{className:"animate-spin h-12 w-12 text-blue-400"}),O.jsx("p",{className:"text-lg text-gray-300 mt-4",children:e})]}),Me=()=>{const[s,t]=e.useState(!1),[a,r]=e.useState(!1),l=async()=>{if(s)return;t(!0);const e=new k;try{await C(je,e)}catch(a){console.error("Erro ao fazer login com Google:",a)}finally{t(!1)}};return O.jsxs("div",{className:"flex flex-col h-full w-full bg-gradient-to-br from-gray-900 via-gray-900 to-blue-900/50 text-white overflow-hidden",children:[O.jsxs("nav",{className:"flex justify-between items-center p-4 backdrop-blur-sm bg-black/20 border-b border-white/10 z-20",children:[O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx(oe,{className:"text-blue-400"}),O.jsx("h1",{className:"text-2xl font-bold",children:"ChatD"})]}),O.jsxs("div",{className:"flex items-center gap-4",children:[O.jsx("button",{onClick:l,className:"px-4 py-2 text-sm font-semibold bg-blue-600 rounded-lg hover:bg-blue-700 transition-all duration-300 transform hover:scale-105 active:scale-95",children:"Entrar no Chat"}),O.jsxs("div",{className:"relative",children:[O.jsx("button",{onClick:()=>{r(!0),setTimeout(()=>r(!1),2e3)},className:"px-4 py-2 text-sm font-semibold bg-gray-700 text-gray-400 rounded-lg cursor-not-allowed",children:"SocialiD"}),a&&O.jsx("span",{className:"absolute top-full mt-2 left-1/2 -translate-x-1/2 text-xs bg-black text-white px-2 py-1 rounded animate-fade-in",children:"Em Breve!"})]})]})]}),O.jsx("main",{className:"flex-grow flex items-center justify-center p-4",children:O.jsxs("div",{className:"text-center flex flex-col items-center",children:[O.jsx("h2",{style:{animationDelay:"0.2s"},className:"text-5xl font-extrabold mb-4 animate-fade-in-up",children:"Conecte-se. Converse. Jogue."}),O.jsx("p",{style:{animationDelay:"0.4s"},className:"text-lg text-gray-300 max-w-2xl mb-8 animate-fade-in-up",children:"Bem-vindo ao ChatD, sua nova plataforma para conversas seguras e diversÃ£o. FaÃ§a login para comeÃ§ar a se conectar com seus amigos."}),O.jsxs("button",{style:{animationDelay:"0.6s"},onClick:l,disabled:s,className:"flex items-center justify-center gap-3 px-8 py-4 bg-white text-gray-800 font-bold text-lg rounded-lg hover:bg-gray-200 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-wait animate-fade-in-up",children:[s?O.jsx(ae,{className:"animate-spin w-6 h-6"}):O.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google icon",className:"w-6 h-6"}),s?"Entrando...":"Fazer Login com Google"]})]})})]})},Ee=({user:e,onClose:s})=>e?O.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 animate-fade-in",onClick:s,children:O.jsxs("div",{className:"bg-gray-800 rounded-2xl p-8 max-w-sm w-full text-center border border-blue-500/50 shadow-lg transform transition-all animate-zoom-in",onClick:e=>e.stopPropagation(),children:[O.jsx("img",{src:e.photoURL,alt:e.displayName,className:"w-24 h-24 rounded-full mx-auto mb-4 border-4 border-blue-500"}),O.jsx("h2",{className:"text-2xl font-bold text-white",children:e.displayName}),O.jsx("p",{className:"text-gray-400 mb-4",children:e.email}),O.jsxs("p",{className:"text-gray-300 italic",children:['"$',e.recado||"Sem recado.",'"']}),O.jsx("button",{onClick:s,className:"mt-6 bg-blue-600 px-4 py-2 rounded-lg text-white font-semibold hover:bg-blue-700 transition-all duration-300 transform hover:scale-105 active:scale-95",children:"Fechar"})]})}):null,qe=({user:s,onClose:t})=>{const[a,r]=e.useState(s.recado||"");return O.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 animate-fade-in",onClick:t,children:O.jsxs("div",{className:"bg-gray-800 rounded-2xl p-8 max-w-sm w-full text-center border border-blue-500/50 shadow-lg transform transition-all animate-zoom-in",onClick:e=>e.stopPropagation(),children:[O.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Editar Perfil"}),O.jsxs("div",{className:"mb-4",children:[O.jsx("label",{htmlFor:"recado",className:"block text-gray-300 text-sm font-bold mb-2",children:"Recado:"}),O.jsx("input",{type:"text",id:"recado",value:a,onChange:e=>r(e.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-gray-700 border-gray-600 text-white",placeholder:"Escreva seu recado..."})]}),O.jsxs("div",{className:"flex justify-end gap-4",children:[O.jsx("button",{onClick:t,className:"bg-gray-600 px-4 py-2 rounded-lg text-white font-semibold hover:bg-gray-700 transition-all duration-300 transform hover:scale-105 active:scale-95",children:"Cancelar"}),O.jsx("button",{onClick:async()=>{const e=i(ve,"users",s.uid);await M(e,{recado:a}),t()},className:"bg-blue-600 px-4 py-2 rounded-lg text-white font-semibold hover:bg-blue-700 transition-all duration-300 transform hover:scale-105 active:scale-95",children:"Salvar"})]})]})})},ze=({currentUser:s})=>{const[t,a]=e.useState([]),[r,l]=e.useState(!0);e.useEffect(()=>{if(!(null==s?void 0:s.uid))return;const e=m(h(ve,"friendships"),x("users","array-contains",s.uid),x("status","==","pending")),t=g(e,async e=>{const t=e.docs.filter(e=>e.data().requestedBy!==s.uid),r=await Promise.all(t.map(async e=>{const s=e.data().requestedBy,t=await c(i(ve,"users",s));return t.exists()?{id:e.id,...e.data(),requester:t.data()}:null}));a(r.filter(Boolean)),l(!1)});return()=>t()},[s]);return r?O.jsx("p",{className:"text-gray-400",children:"Carregando pedidos..."}):0===t.length?O.jsx("p",{className:"text-gray-400",children:"Nenhum pedido de amizade pendente."}):O.jsx("div",{className:"space-y-4",children:t.map(e=>O.jsxs("div",{className:"flex items-center justify-between bg-gray-700 p-3 rounded-lg shadow-md",children:[O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx("img",{src:e.requester.photoURL,alt:e.requester.displayName,className:"w-10 h-10 rounded-full"}),O.jsx("span",{className:"text-white font-semibold",children:e.requester.displayName})]}),O.jsxs("div",{className:"flex gap-2",children:[O.jsx("button",{onClick:()=>(async e=>{const s=i(ve,"friendships",e);await M(s,{status:"accepted"})})(e.id),className:"p-2 bg-green-600 rounded-full hover:bg-green-700 transition-colors",children:O.jsx(Z,{className:"w-5 h-5 text-white"})}),O.jsx("button",{onClick:()=>(async e=>{await N(i(ve,"friendships",e))})(e.id),className:"p-2 bg-red-600 rounded-full hover:bg-red-700 transition-colors",children:O.jsx(fe,{className:"w-5 h-5 text-white"})})]})]},e.id))})},Be=({currentUser:s,onSelectFriend:t,onOpenProfile:a,onRemoveFriend:r,onEditCustomName:l})=>{const[o,n]=e.useState([]),[d,u]=e.useState(!0);return e.useEffect(()=>{if(!(null==s?void 0:s.uid))return;const e=m(h(ve,"friendships"),x("users","array-contains",s.uid),x("status","==","accepted")),t=g(e,async e=>{const t=e.docs.map(async e=>{var t;const a=e.data(),r=a.users.find(e=>e!==s.uid),l=await c(i(ve,"users",r));if(l.exists()){const o=l.data(),n=null==(t=a.customNames)?void 0:t[s.uid];return{id:e.id,...a,friendId:r,...o,displayName:n||o.displayName}}return null}),a=(await Promise.all(t)).filter(Boolean);n(a),u(!1)});return()=>t()},[s]),d?O.jsx("p",{className:"text-gray-400",children:"Carregando amigos..."}):0===o.length?O.jsx("p",{className:"text-gray-400",children:"VocÃª ainda nÃ£o tem amigos. Envie um pedido!"}):O.jsx("div",{className:"space-y-3",children:o.map(e=>O.jsxs("div",{className:"flex items-center justify-between bg-gray-700 p-3 rounded-lg shadow-md cursor-pointer hover:bg-gray-600 transition-colors",children:[O.jsxs("div",{className:"flex items-center gap-3",onClick:()=>t(e.friendId,e.displayName),children:[O.jsxs("div",{className:"relative",children:[O.jsx("img",{src:e.photoURL,alt:e.displayName,className:"w-12 h-12 rounded-full"}),"online"===e.presence?O.jsx("span",{className:"absolute bottom-0 right-0 block w-3 h-3 bg-green-500 rounded-full ring-2 ring-gray-700"}):O.jsx("span",{className:"absolute bottom-0 right-0 block w-3 h-3 bg-red-500 rounded-full ring-2 ring-gray-700"})]}),O.jsxs("div",{children:[O.jsx("span",{className:"text-white font-semibold block",children:e.displayName}),O.jsx("span",{className:"text-gray-400 text-sm block",children:"online"===e.presence?"Online":"Offline"})]})]}),O.jsxs("div",{className:"flex gap-2",children:[O.jsx("button",{onClick:()=>a(e),className:"p-2 bg-blue-600 rounded-full hover:bg-blue-700 transition-colors",children:O.jsx(ge,{className:"w-5 h-5 text-white"})}),O.jsx("button",{onClick:()=>r(e.id,e.displayName),className:"p-2 bg-red-600 rounded-full hover:bg-red-700 transition-colors",children:O.jsx(be,{className:"w-5 h-5 text-white"})}),O.jsx("button",{onClick:()=>{var t;return l(e.id,e.displayName,null==(t=e.customNames)?void 0:t[s.uid])},className:"p-2 bg-yellow-600 rounded-full hover:bg-yellow-700 transition-colors",children:O.jsx(ce,{className:"w-5 h-5 text-white"})})]})]},e.id))})},Ie=({friendshipId:s,currentName:t,onClose:a})=>{const{user:r}=Ce(),[l,o]=e.useState(t||"");return O.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 animate-fade-in",onClick:a,children:O.jsxs("div",{className:"bg-gray-800 rounded-2xl p-8 max-w-sm w-full text-center border border-blue-500/50 shadow-lg transform transition-all animate-zoom-in",onClick:e=>e.stopPropagation(),children:[O.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Editar Nome do Amigo"}),O.jsxs("div",{className:"mb-4",children:[O.jsx("label",{htmlFor:"customName",className:"block text-gray-300 text-sm font-bold mb-2",children:"Nome Personalizado:"}),O.jsx("input",{type:"text",id:"customName",value:l,onChange:e=>o(e.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-gray-700 border-gray-600 text-white",placeholder:"Deixe em branco para usar o nome original..."})]}),O.jsxs("div",{className:"flex justify-end gap-4",children:[O.jsx("button",{onClick:a,className:"bg-gray-600 px-4 py-2 rounded-lg text-white font-semibold hover:bg-gray-700 transition-all duration-300 transform hover:scale-105 active:scale-95",children:"Cancelar"}),O.jsx("button",{onClick:async()=>{if(!r)return;const e=i(ve,"friendships",s);await M(e,{[`customNames.${r.uid}`]:l||null}),a()},className:"bg-blue-600 px-4 py-2 rounded-lg text-white font-semibold hover:bg-blue-700 transition-all duration-300 transform hover:scale-105 active:scale-95",children:"Salvar"})]})]})})},Pe=({currentUser:s})=>{const[t,a]=e.useState(""),[r,l]=e.useState([]),[o,n]=e.useState(!1),[c,g]=e.useState({});return O.jsxs("div",{className:"p-4 bg-gray-800 rounded-lg shadow-lg",children:[O.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Adicionar Amigo"}),O.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),t.trim()){n(!0);try{const e=m(h(ve,"users"),x("email","==",t.toLowerCase())),a=(await q(e)).docs.map(e=>e.data()).filter(e=>e.uid!==s.uid),r=await Promise.all(a.map(async e=>{const t=m(h(ve,"friendships"),x("users","in",[[s.uid,e.uid],[e.uid,s.uid]])),a=await q(t);if(a.empty)return{...e,friendshipStatus:null};{const s=a.docs[0].data();return{...e,friendshipStatus:s.status,friendshipId:a.docs[0].id}}}));l(r)}catch(a){console.error("Erro ao buscar usuÃ¡rios:",a)}finally{n(!1)}}else l([])},className:"flex gap-2 mb-4",children:[O.jsx("input",{type:"email",placeholder:"Buscar por e-mail...",value:t,onChange:e=>a(e.target.value),className:"flex-grow p-2 rounded-lg bg-gray-700 border border-gray-600 text-white focus:outline-none focus:border-blue-500"}),O.jsx("button",{type:"submit",className:"p-2 bg-blue-600 rounded-lg text-white hover:bg-blue-700 transition-colors",children:O.jsx(pe,{className:"w-5 h-5"})})]}),o&&O.jsx("p",{className:"text-gray-400",children:"Buscando..."}),O.jsx("div",{className:"space-y-3",children:r.map(e=>O.jsxs("div",{className:"flex items-center justify-between bg-gray-700 p-3 rounded-lg shadow-md",children:[O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx("img",{src:e.photoURL,alt:e.displayName,className:"w-10 h-10 rounded-full"}),O.jsx("span",{className:"text-white font-semibold",children:e.displayName})]}),O.jsxs("div",{children:["pending"===e.friendshipStatus&&e.requestedBy===s.uid&&O.jsx("span",{className:"text-yellow-400 text-sm",children:"Pendente"}),"pending"===e.friendshipStatus&&e.requestedBy!==s.uid&&O.jsx("span",{className:"text-blue-400 text-sm",children:"Recebido"}),"accepted"===e.friendshipStatus&&O.jsx("span",{className:"text-green-400 text-sm",children:"Amigos"}),!e.friendshipStatus&&O.jsx("button",{onClick:()=>(async e=>{if(!c[e])try{const t=i(h(ve,"friendships"));await d(t,{users:[s.uid,e],status:"pending",requestedBy:s.uid,createdAt:u()}),g(s=>({...s,[e]:!0})),alert("Pedido de amizade enviado!")}catch(t){console.error("Erro ao enviar pedido de amizade:",t),alert("Erro ao enviar pedido de amizade.")}})(e.uid),disabled:c[e.uid],className:"p-2 bg-blue-600 rounded-full hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:O.jsx(ge,{className:"w-5 h-5 text-white"})})]})]},e.uid))})]})},$e=({selectedFriendId:s,selectedFriendName:t,onBack:a})=>{var r,l;const{user:o}=Ce(),[n,c]=e.useState([]),[d,f]=e.useState(""),[N,w]=e.useState(!1),[k,C]=e.useState(!1),[I,P]=e.useState(!1),$=e.useRef(null),L=e.useRef(null),R=e.useMemo(()=>o&&s?[o.uid,s].sort().join("_"):null,[o,s]);e.useEffect(()=>{if(!R)return;const e=m(h(ve,`conversations/${R}/messages`),y("timestamp","asc")),s=g(e,e=>{const s=e.docs.map(e=>({id:e.id,...e.data()}));c(s);const t=S(ve);s.forEach(e=>{if(e.receiverId===o.uid&&"read"!==e.status){const s=i(ve,`conversations/${R}/messages`,e.id);t.update(s,{status:"read"})}}),t.commit()});return()=>s()},[R,o]),e.useEffect(()=>{var e;null==(e=$.current)||e.scrollIntoView({behavior:"smooth"})},[n]),e.useEffect(()=>{if(!R||!o)return;const e=b(Ne,`typing/${R}/${o.uid}`);return d.length>0?j(e,!0):v(e),()=>{v(e)}},[d,R,o]),e.useEffect(()=>{if(!R||!s)return;const e=b(Ne,`typing/${R}/${s}`),t=p(e,e=>{w(!0===e.val())});return()=>t()},[R,s]);const D=((s,t)=>{const[a,r]=e.useState(null);return e.useEffect(()=>{if(!s||!t||t.isGroup)return void r(null);const e=m(h(ve,"friendships"),x("users","in",[[s.uid,t.uid],[t.uid,s.uid]])),a=g(e,e=>{if(e.empty)r(null);else{const s=e.docs[0];r({id:s.id,...s.data()})}});return()=>a()},[s,t]),a})(o,{uid:s}),F=null==(r=null==D?void 0:D.blockedBy)?void 0:r.includes(o.uid);return(null==(l=null==D?void 0:D.blockedBy)?void 0:l.includes(s))?O.jsxs("div",{className:"flex flex-col h-full bg-gray-900 text-white",children:[O.jsxs("header",{className:"flex items-center p-4 bg-gray-800 border-b border-gray-700",children:[O.jsx("button",{onClick:a,className:"p-2 rounded-full hover:bg-gray-700 transition-colors",children:O.jsx(Q,{className:"w-6 h-6 text-white"})}),O.jsx("h2",{className:"text-xl font-semibold ml-4",children:t})]}),O.jsx("div",{className:"flex-grow flex items-center justify-center p-4 text-center text-gray-400",children:O.jsxs("p",{children:[t," bloqueou vocÃª. VocÃª nÃ£o pode enviar mensagens para esta pessoa."]})})]}):O.jsxs("div",{className:"flex flex-col h-full bg-gray-900 text-white",children:[O.jsxs("header",{className:"flex items-center justify-between p-4 bg-gray-800 border-b border-gray-700 relative",children:[O.jsxs("div",{className:"flex items-center",children:[O.jsx("button",{onClick:a,className:"p-2 rounded-full hover:bg-gray-700 transition-colors",children:O.jsx(Q,{className:"w-6 h-6 text-white"})}),O.jsx("h2",{className:"text-xl font-semibold ml-4",children:t}),N&&O.jsx("span",{className:"ml-2 text-sm text-blue-400 animate-pulse",children:"digitando..."})]}),O.jsxs("div",{className:"relative",children:[O.jsx("button",{onClick:()=>P(!I),className:"p-2 rounded-full hover:bg-gray-700 transition-colors",children:O.jsx(ne,{className:"w-6 h-6 text-white"})}),I&&O.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-gray-700 rounded-md shadow-lg z-10 animate-fade-in-down",children:[O.jsxs("button",{onClick:()=>{(async()=>{if(confirm("Tem certeza que deseja apagar esta conversa? Isso nÃ£o pode ser desfeito."))try{const e=i(ve,"friendships",R);await M(e,{chatDeletedFor:E(o.uid)}),a()}catch(e){console.error("Erro ao apagar conversa:",e),alert("Erro ao apagar conversa.")}})(),P(!1)},className:"flex items-center gap-2 w-full text-left px-4 py-2 text-sm text-red-400 hover:bg-gray-600",children:[O.jsx(he,{className:"w-4 h-4"})," Apagar Conversa"]}),O.jsxs("button",{onClick:()=>{(async()=>{if(confirm("Tem certeza que deseja limpar as mensagens desta conversa? Isso nÃ£o pode ser desfeito."))try{const e=h(ve,`conversations/${R}/messages`),s=m(e),t=await q(s),a=S(ve);t.docs.forEach(e=>{a.delete(e.ref)}),await a.commit(),alert("Conversa limpa com sucesso!")}catch(e){console.error("Erro ao limpar conversa:",e),alert("Erro ao limpar conversa.")}})(),P(!1)},className:"flex items-center gap-2 w-full text-left px-4 py-2 text-sm text-yellow-400 hover:bg-gray-600",children:[O.jsx(ee,{className:"w-4 h-4"})," Limpar Conversa"]}),F?O.jsxs("button",{onClick:()=>{(async()=>{if(confirm(`Tem certeza que deseja desbloquear ${t}?`))try{const e=i(ve,"friendships",R);await M(e,{blockedBy:z(o.uid)}),alert(`${t} desbloqueado(a) com sucesso.`)}catch(e){console.error("Erro ao desbloquear usuÃ¡rio:",e),alert("Erro ao desbloquear usuÃ¡rio.")}})(),P(!1)},className:"flex items-center gap-2 w-full text-left px-4 py-2 text-sm text-green-400 hover:bg-gray-600",children:[O.jsx(me,{className:"w-4 h-4"})," Desbloquear"]}):O.jsxs("button",{onClick:()=>{(async()=>{if(confirm(`Tem certeza que deseja bloquear ${t}? VocÃª nÃ£o receberÃ¡ mais mensagens dele(a).`))try{const e=i(ve,"friendships",R);await M(e,{blockedBy:E(o.uid)}),alert(`${t} bloqueado(a) com sucesso.`),a()}catch(e){console.error("Erro ao bloquear usuÃ¡rio:",e),alert("Erro ao bloquear usuÃ¡rio.")}})(),P(!1)},className:"flex items-center gap-2 w-full text-left px-4 py-2 text-sm text-red-400 hover:bg-gray-600",children:[O.jsx(G,{className:"w-4 h-4"})," Bloquear"]})]})]})]}),O.jsxs("div",{className:"flex-grow p-4 overflow-y-auto space-y-3 custom-scrollbar",children:[n.map((e,s)=>O.jsx("div",{className:"flex "+(e.senderId===o.uid?"justify-end":"justify-start"),children:O.jsxs("div",{className:"max-w-[70%] p-3 rounded-lg shadow-md "+(e.senderId===o.uid?"bg-blue-600 text-white":"bg-gray-700 text-white"),children:[O.jsx("p",{className:"break-words",children:e.text}),O.jsxs("div",{className:"text-xs mt-1 flex items-center justify-end gap-1 text-gray-200",children:[e.timestamp&&new Date(e.timestamp.toDate()).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),e.senderId===o.uid&&("read"===e.status?O.jsx(X,{className:"w-4 h-4 text-green-300"}):O.jsx(Z,{className:"w-4 h-4 text-gray-300"}))]})]})},e.id)),O.jsx("div",{ref:$})]}),O.jsxs("div",{className:"p-4 bg-gray-800 border-t border-gray-700",children:[O.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),""===d.trim())return;const t={senderId:o.uid,receiverId:s,text:d.trim(),timestamp:u(),status:"sent"};try{await B(h(ve,`conversations/${R}/messages`),t),f(""),C(!1)}catch(a){console.error("Erro ao enviar mensagem:",a)}},className:"flex items-center gap-2",children:[O.jsxs("div",{className:"relative flex-grow",children:[O.jsx("input",{type:"text",ref:L,value:d,onChange:e=>f(e.target.value),placeholder:"Digite uma mensagem...",className:"w-full p-3 pr-10 rounded-lg bg-gray-700 border border-gray-600 text-white focus:outline-none focus:border-blue-500"}),O.jsx("button",{type:"button",onClick:()=>C(!k),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-gray-400 hover:text-gray-200",children:O.jsx(xe,{className:"w-6 h-6"})})]}),O.jsx("button",{type:"submit",className:"p-3 bg-blue-600 rounded-lg text-white hover:bg-blue-700 transition-colors",children:O.jsx(ue,{className:"w-6 h-6"})})]}),k&&O.jsx("div",{className:"grid grid-cols-8 gap-2 p-2 bg-gray-700 rounded-lg mt-2 animate-fade-in-up",children:["ð","ð","ð","ð","ð","ð¥","ð","ð","â¤ï¸","ð","ð","ð¡","ð¤","ð¥³","ð","ð¤©","ð¯","ð","ð","ð¤","ð¤£","ð","ð","ð","ð¥°","ð","ð","ð","ð","ð","ð","ð","ð¤ª","ð","ð¤","ð¤","ð¤«","ð¤­","ð¤","ð¤¨","ð","ð","ð¶","ð","ð","ð","ð¬","ð¤¥","ð","ð","ðª","ð¤¤","ð´","ð·","ð¤","ð¤","ð¤¢","ð¤®","ð¤§","ð¥µ","ð¥¶","ð¥´","ðµ","ð¤¯","ð¤ ","ð¥³","ð","ð¤","ð§","ð","ð","ð","â¹ï¸","ð®","ð¯","ð²","ð³","ð¥º","ð¦","ð§","ð¨","ð°","ð¥","ð¢","ð­","ð±","ð","ð£","ð","ð","ð©","ð«","ð¤","ð¡","ð ","ð¤¬","ð","ð¿","ð","â ï¸","ð©","ð¤¡","ð¹","ðº","ð»","ð½","ð¾","ð¤","ðº","ð¸","ð¹","ð»","ð¼","ð½","ð","ð¿","ð¾"].map(e=>O.jsx("button",{onClick:()=>(e=>{f(s=>s+e),L.current.focus()})(e),className:"text-xl p-1 hover:bg-gray-600 rounded-md transition-colors",children:e},e))})]})]})},Le=({currentUser:s,onSelectFriend:t})=>{const[a,r]=e.useState([]),[l,o]=e.useState(!0);return e.useEffect(()=>{if(!(null==s?void 0:s.uid))return;const e=m(h(ve,"friendships"),x("users","array-contains",s.uid),x("status","==","accepted")),t=g(e,async e=>{const t=e.docs.map(async e=>{var t,a;const r=e.data(),l=r.users.find(e=>e!==s.uid);if(null==(t=r.chatDeletedFor)?void 0:t.includes(s.uid))return null;const o=await c(i(ve,"users",l));if(!o.exists())return null;const n=o.data(),d=(null==(a=r.customNames)?void 0:a[s.uid])||n.displayName,u=[s.uid,l].sort().join("_"),g=m(h(ve,`conversations/${u}/messages`),y("timestamp","desc"),w(1)),b=await q(g),p=b.empty?null:b.docs[0].data(),f=m(h(ve,`conversations/${u}/messages`),x("receiverId","==",s.uid),x("status","!=","read")),j=(await q(f)).size;return{friendId:l,displayName:d,photoURL:n.photoURL,lastMessage:p,unreadCount:j,friendshipId:e.id}}),a=(await Promise.all(t)).filter(Boolean);a.sort((e,s)=>e.lastMessage||s.lastMessage?e.lastMessage?s.lastMessage?s.lastMessage.timestamp.toDate()-e.lastMessage.timestamp.toDate():-1:1:0),r(a),o(!1)});return()=>t()},[s]),l?O.jsx("p",{className:"text-gray-400",children:"Carregando conversas..."}):0===a.length?O.jsx("p",{className:"text-gray-400",children:"Nenhuma conversa recente."}):O.jsx("div",{className:"space-y-3",children:a.map(e=>O.jsxs("div",{className:"flex items-center justify-between bg-gray-700 p-3 rounded-lg shadow-md cursor-pointer hover:bg-gray-600 transition-colors",onClick:()=>t(e.friendId,e.displayName),children:[O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx("img",{src:e.photoURL,alt:e.displayName,className:"w-12 h-12 rounded-full"}),O.jsxs("div",{children:[O.jsx("span",{className:"text-white font-semibold block",children:e.displayName}),e.lastMessage&&O.jsxs("p",{className:"text-gray-400 text-sm truncate max-w-[200px]",children:[e.lastMessage.senderId===s.uid?"VocÃª: ":"",e.lastMessage.text]})]})]}),e.unreadCount>0&&O.jsx("span",{className:"bg-blue-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:e.unreadCount})]},e.friendId))})},Re=()=>{const{user:s,loading:t}=Ce(),[a,r]=e.useState(null),[l,o]=e.useState(null),[n,c]=e.useState("chats"),[d,y]=e.useState(!1),[v,w]=e.useState(null),[k,C]=e.useState(!1),[S,E]=e.useState(!1),[q,z]=e.useState({friendshipId:null,currentName:null}),B=(s=>{const[t,a]=e.useState(0);return e.useEffect(()=>{if(!(null==s?void 0:s.uid))return;const e=m(h(ve,"friendships"),x("users","array-contains",s.uid),x("status","==","accepted")),t=g(e,e=>{const t=e.docs.filter(e=>{var t;return!(null==(t=e.data().chatDeletedFor)?void 0:t.includes(s.uid))}).map(e=>e.data().users.find(e=>e!==s.uid));if(0===t.length)return void a(0);const r={},l=t.map(e=>{const t=[s.uid,e].sort().join("_"),l=m(h(ve,`conversations/${t}/messages`),x("receiverId","==",s.uid),x("status","!=","read"));return g(l,e=>{r[t]=e.size;const s=Object.values(r).reduce((e,s)=>e+s,0);a(s)})});return()=>l.forEach(e=>e())});return()=>t()},[s]),t})(s);(s=>{const t=e.useRef(s);e.useEffect(()=>{"default"===Notification.permission&&Notification.requestPermission()},[]),e.useEffect(()=>{document.hidden&&"granted"===Notification.permission&&s>0&&s>t.current&&new Notification("Nova Mensagem no ChatD",{body:`VocÃª tem ${s} mensagens nÃ£o lidas.`,icon:"https://placehold.co/96x96/1D4ED8/FFFFFF?text=CD"}),t.current=s},[s])})(B),(s=>{e.useEffect(()=>{if(!s)return;const e=b(Ne,`/status/${s.uid}`),t=i(ve,`/users/${s.uid}`),a={state:"offline",last_changed:Date.now()},r={state:"online",last_changed:Date.now()},l=b(Ne,".info/connected"),o=p(l,s=>{!1!==s.val()?I(e).set(a).then(()=>{j(e,r),M(t,{state:"online",last_changed:u()})}):M(t,{state:"offline",last_changed:u()})});return()=>o()},[s])})(s);const P=(e,s)=>{r(e),o(s)},$=e=>{w(e),y(!0)};return t?O.jsx(Se,{}):s?O.jsxs("div",{className:"flex h-screen bg-gray-900 text-white",children:[O.jsxs("aside",{className:"w-20 bg-gray-800 flex flex-col items-center py-6 border-r border-gray-700 shadow-lg",children:[O.jsx("div",{className:"mb-8",children:O.jsx("img",{src:s.photoURL,alt:s.displayName,className:"w-12 h-12 rounded-full cursor-pointer border-2 border-blue-500 hover:border-blue-400 transition-colors",onClick:()=>$(s)})}),O.jsxs("nav",{className:"flex flex-col gap-6",children:[O.jsxs("button",{onClick:()=>c("chats"),className:`p-3 rounded-full ${"chats"===n?"bg-blue-600":"hover:bg-gray-700"} transition-colors relative`,children:[O.jsx(oe,{className:"w-6 h-6"}),B>0&&O.jsx("span",{className:"absolute top-0 right-0 block w-4 h-4 bg-red-500 rounded-full text-xs flex items-center justify-center text-white font-bold",children:B})]}),O.jsx("button",{onClick:()=>c("friends"),className:`p-3 rounded-full ${"friends"===n?"bg-blue-600":"hover:bg-gray-700"} transition-colors`,children:O.jsx(pe,{className:"w-6 h-6"})}),O.jsxs("button",{onClick:()=>c("requests"),className:`p-3 rounded-full ${"requests"===n?"bg-blue-600":"hover:bg-gray-700"} transition-colors relative`,children:[O.jsx(ge,{className:"w-6 h-6"}),O.jsx(De,{currentUser:s})]}),O.jsx("button",{onClick:()=>c("addFriend"),className:`p-3 rounded-full ${"addFriend"===n?"bg-blue-600":"hover:bg-gray-700"} transition-colors`,children:O.jsx(ge,{className:"w-6 h-6"})}),O.jsx("button",{onClick:()=>c("games"),className:`p-3 rounded-full ${"games"===n?"bg-blue-600":"hover:bg-gray-700"} transition-colors`,children:O.jsx(se,{className:"w-6 h-6"})}),O.jsx("button",{onClick:()=>c("socialid"),className:`p-3 rounded-full ${"socialid"===n?"bg-blue-600":"hover:bg-gray-700"} transition-colors`,children:O.jsx(Y,{className:"w-6 h-6"})})]}),O.jsx("button",{onClick:async()=>{try{await f(je)}catch(e){console.error("Erro ao fazer logout:",e)}},className:"mt-auto p-3 rounded-full hover:bg-red-700 transition-colors",children:O.jsx(re,{className:"w-6 h-6 text-red-400"})})]}),O.jsx("main",{className:"flex-grow flex flex-col",children:a?O.jsx($e,{selectedFriendId:a,selectedFriendName:l,onBack:()=>{r(null),o(null)}}):O.jsxs("div",{className:"flex-grow p-6 overflow-y-auto custom-scrollbar",children:["chats"===n&&O.jsx(Le,{currentUser:s,onSelectFriend:P}),"friends"===n&&O.jsx(Be,{currentUser:s,onSelectFriend:P,onOpenProfile:$,onRemoveFriend:async(e,s)=>{if(confirm(`Tem certeza que deseja remover ${s} dos seus amigos?`))try{await N(i(ve,"friendships",e)),alert(`${s} removido(a) com sucesso.`)}catch(t){console.error("Erro ao remover amigo:",t),alert("Erro ao remover amigo.")}},onEditCustomName:(e,s,t)=>{z({friendshipId:e,currentName:t||s}),E(!0)}}),"requests"===n&&O.jsx(ze,{currentUser:s}),"addFriend"===n&&O.jsx(Pe,{currentUser:s}),"games"===n&&O.jsx(Fe,{}),"socialid"===n&&O.jsx(Qe,{currentUser:s})]})}),d&&O.jsx(Ee,{user:v,onClose:()=>y(!1)}),k&&O.jsx(qe,{user:s,onClose:()=>C(!1)}),S&&O.jsx(Ie,{friendshipId:q.friendshipId,currentName:q.currentName,onClose:()=>E(!1)})]}):O.jsx(Me,{})},De=({currentUser:s})=>{const t=(s=>{const[t,a]=e.useState(0);return e.useEffect(()=>{if(!(null==s?void 0:s.uid))return;const e=m(h(ve,"friendships"),x("users","array-contains",s.uid),x("status","==","pending")),t=g(e,e=>{const t=e.docs.filter(e=>e.data().requestedBy!==s.uid);a(t.length)});return()=>t()},[s]),t})(s);return t>0?O.jsx("span",{className:"absolute top-0 right-0 block w-4 h-4 bg-red-500 rounded-full text-xs flex items-center justify-center text-white font-bold",children:t}):null},Fe=()=>{const[s,t]=e.useState(null),a=[{id:"jokenpo",name:"JoKenPo",icon:O.jsx(te,{className:"w-8 h-8"})},{id:"guessing",name:"Adivinhe o NÃºmero",icon:O.jsx(K,{className:"w-8 h-8"})},{id:"tictactoe",name:"Jogo da Velha",icon:O.jsx(fe,{className:"w-8 h-8"})},{id:"quiz",name:"Quiz de Conhecimentos",icon:O.jsx(ie,{className:"w-8 h-8"})},{id:"memory",name:"Jogo da MemÃ³ria",icon:O.jsx(de,{className:"w-8 h-8"})},{id:"calculator",name:"Calculadora",icon:O.jsx(K,{className:"w-8 h-8"})},{id:"dice",name:"Dados",icon:O.jsx(K,{className:"w-8 h-8"})},{id:"coinflip",name:"Cara ou Coroa",icon:O.jsx(K,{className:"w-8 h-8"})}];if(s)switch(s){case"jokenpo":return O.jsx(Ve,{onBack:()=>t(null)});case"guessing":return O.jsx(_e,{onBack:()=>t(null)});case"tictactoe":return O.jsx(Ue,{onBack:()=>t(null)});case"quiz":return O.jsx(Oe,{onBack:()=>t(null)});case"memory":return O.jsx(Ae,{onBack:()=>t(null)});case"calculator":return O.jsx(Te,{onBack:()=>t(null)});case"dice":return O.jsx(Je,{onBack:()=>t(null)});case"coinflip":return O.jsx(He,{onBack:()=>t(null)});default:return O.jsx("p",{className:"text-red-500",children:"Jogo nÃ£o encontrado."})}return O.jsxs("div",{className:"p-4 bg-gray-800 rounded-lg shadow-lg",children:[O.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Jogos"}),O.jsx("div",{className:"grid grid-cols-2 gap-4",children:a.map(e=>O.jsxs("button",{onClick:()=>t(e.id),className:"flex flex-col items-center justify-center p-4 bg-gray-700 rounded-lg shadow-md hover:bg-blue-600 transition-colors transform hover:scale-105 active:scale-95",children:[e.icon,O.jsx("span",{className:"mt-2 text-lg font-semibold text-white",children:e.name})]},e.id))})]})},Ve=({onBack:s})=>{const[t,a]=e.useState(null),[r,l]=e.useState(null),[o,n]=e.useState(""),[i,c]=e.useState({player:0,computer:0}),d=["pedra","papel","tesoura"];return O.jsxs("div",{className:"p-4 bg-gray-800 rounded-lg shadow-lg text-center",children:[O.jsx("button",{onClick:s,className:"mb-4 p-2 rounded-full hover:bg-gray-700 transition-colors",children:O.jsx(Q,{className:"w-6 h-6 text-white"})}),O.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"JoKenPo (Pedra, Papel, Tesoura)"}),O.jsx("div",{className:"flex justify-around mb-6",children:d.map(e=>O.jsx("button",{onClick:()=>(e=>{a(e);const s=d[Math.floor(Math.random()*d.length)];l(s),e===s?n("Empate!"):"pedra"===e&&"tesoura"===s||"papel"===e&&"pedra"===s||"tesoura"===e&&"papel"===s?(n("VocÃª Venceu!"),c(e=>({...e,player:e.player+1}))):(n("Computador Venceu!"),c(e=>({...e,computer:e.computer+1})))})(e),className:"p-4 bg-blue-600 rounded-lg text-white font-semibold text-lg capitalize hover:bg-blue-700 transition-colors transform hover:scale-105 active:scale-95",children:e},e))}),t&&r&&O.jsxs("div",{className:"mb-6",children:[O.jsxs("p",{className:"text-lg text-gray-300",children:["VocÃª escolheu: ",O.jsx("span",{className:"font-bold capitalize",children:t})]}),O.jsxs("p",{className:"text-lg text-gray-300",children:["Computador escolheu: ",O.jsx("span",{className:"font-bold capitalize",children:r})]}),O.jsx("p",{className:"text-3xl font-extrabold mt-4 text-blue-400",children:o})]}),O.jsx("div",{className:"text-xl font-semibold mb-6",children:O.jsxs("p",{children:["Placar: VocÃª ",i.player," - ",i.computer," Computador"]})}),O.jsx("button",{onClick:()=>{a(null),l(null),n(""),c({player:0,computer:0})},className:"px-6 py-3 bg-red-600 rounded-lg text-white font-semibold hover:bg-red-700 transition-colors transform hover:scale-105 active:scale-95",children:"Reiniciar Jogo"})]})},_e=({onBack:s})=>{const[t,a]=e.useState(null),[r,l]=e.useState(""),[o,n]=e.useState(""),[i,c]=e.useState(0),[d,u]=e.useState(!1);e.useEffect(()=>{m()},[]);const m=()=>{a(Math.floor(100*Math.random())+1),l(""),n(""),c(0),u(!1)};return O.jsxs("div",{className:"p-4 bg-gray-800 rounded-lg shadow-lg text-center",children:[O.jsx("button",{onClick:s,className:"mb-4 p-2 rounded-full hover:bg-gray-700 transition-colors",children:O.jsx(Q,{className:"w-6 h-6 text-white"})}),O.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Adivinhe o NÃºmero"}),O.jsx("p",{className:"text-lg text-gray-300 mb-4",children:"Estou pensando em um nÃºmero entre 1 e 100. Tente adivinhar!"}),d?O.jsx("button",{onClick:m,className:"px-6 py-3 bg-green-600 rounded-lg text-white font-semibold hover:bg-green-700 transition-colors transform hover:scale-105 active:scale-95",children:"Jogar Novamente"}):O.jsxs("form",{onSubmit:e=>{e.preventDefault();const s=parseInt(r);isNaN(s)||s<1||s>100?n("Por favor, digite um nÃºmero entre 1 e 100."):(c(e=>e+1),s===t?(n(`ParabÃ©ns! VocÃª acertou o nÃºmero ${t} em ${i+1} tentativas!`),u(!0)):n(s<t?"Tente um nÃºmero maior.":"Tente um nÃºmero menor."),l(""))},className:"flex flex-col items-center gap-4",children:[O.jsx("input",{type:"number",value:r,onChange:e=>l(e.target.value),min:"1",max:"100",className:"w-32 p-3 rounded-lg bg-gray-700 border border-gray-600 text-white text-center text-xl focus:outline-none focus:border-blue-500",placeholder:"?"}),O.jsx("button",{type:"submit",className:"px-6 py-3 bg-blue-600 rounded-lg text-white font-semibold hover:bg-blue-700 transition-colors transform hover:scale-105 active:scale-95",children:"Adivinhar"})]}),o&&O.jsx("p",{className:"mt-4 text-lg font-semibold text-blue-400",children:o}),!d&&i>0&&O.jsxs("p",{className:"mt-2 text-gray-400",children:["Tentativas: ",i]})]})},Ue=({onBack:s})=>{const t=Array(9).fill(null),[a,r]=e.useState(t),[l,o]=e.useState(!0),[n,i]=e.useState("");e.useEffect(()=>{const e=d(a);e?i("Vencedor: "+e):a.every(Boolean)?i("Empate!"):i("PrÃ³ximo jogador: "+(l?"X":"O"))},[a,l]);const c=e=>O.jsx("button",{className:"w-20 h-20 bg-gray-700 text-white text-4xl font-bold flex items-center justify-center border border-gray-600 hover:bg-gray-600 transition-colors",onClick:()=>(e=>{if(a[e]||d(a))return;const s=a.slice();s[e]=l?"X":"O",r(s),o(!l)})(e),children:a[e]}),d=e=>{const s=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(let t=0;t<s.length;t++){const[a,r,l]=s[t];if(e[a]&&e[a]===e[r]&&e[a]===e[l])return e[a]}return null};return O.jsxs("div",{className:"p-4 bg-gray-800 rounded-lg shadow-lg text-center",children:[O.jsx("button",{onClick:s,className:"mb-4 p-2 rounded-full hover:bg-gray-700 transition-colors",children:O.jsx(Q,{className:"w-6 h-6 text-white"})}),O.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Jogo da Velha"}),O.jsx("div",{className:"text-lg font-semibold text-blue-400 mb-4",children:n}),O.jsxs("div",{className:"grid grid-cols-3 w-60 mx-auto border border-gray-600",children:[c(0),c(1),c(2),c(3),c(4),c(5),c(6),c(7),c(8)]}),O.jsx("button",{onClick:()=>{r(t),o(!0)},className:"mt-6 px-6 py-3 bg-red-600 rounded-lg text-white font-semibold hover:bg-red-700 transition-colors transform hover:scale-105 active:scale-95",children:"Reiniciar Jogo"})]})},Oe=({onBack:s})=>{const t=[{question:"Qual Ã© a capital do Brasil?",options:["Rio de Janeiro","SÃ£o Paulo","BrasÃ­lia","Salvador"],answer:"BrasÃ­lia"},{question:"Qual Ã© o maior planeta do nosso sistema solar?",options:["Terra","Marte","JÃºpiter","VÃªnus"],answer:"JÃºpiter"},{question:"Quem pintou a Mona Lisa?",options:["Vincent van Gogh","Pablo Picasso","Leonardo da Vinci","Claude Monet"],answer:"Leonardo da Vinci"},{question:"Qual Ã© o elemento quÃ­mico com o sÃ­mbolo 'O'?",options:["Ouro","OxigÃªnio","Osmio","OzÃ´nio"],answer:"OxigÃªnio"},{question:"Quantos continentes existem?",options:["5","6","7","8"],answer:"7"}],[a,r]=e.useState(0),[l,o]=e.useState(0),[n,i]=e.useState(!1),[c,d]=e.useState(null),[u,m]=e.useState(!1),x=t[a];return O.jsxs("div",{className:"p-4 bg-gray-800 rounded-lg shadow-lg text-center",children:[O.jsx("button",{onClick:s,className:"mb-4 p-2 rounded-full hover:bg-gray-700 transition-colors",children:O.jsx(Q,{className:"w-6 h-6 text-white"})}),O.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Quiz de Conhecimentos Gerais"}),n?O.jsxs("div",{children:[O.jsx("p",{className:"text-3xl font-extrabold text-blue-400 mb-4",children:"Quiz Finalizado!"}),O.jsxs("p",{className:"text-xl text-white mb-6",children:["VocÃª acertou ",l," de ",t.length," perguntas."]}),O.jsx("button",{onClick:()=>{r(0),o(0),i(!1),d(null),m(!1)},className:"px-6 py-3 bg-green-600 rounded-lg text-white font-semibold hover:bg-green-700 transition-colors transform hover:scale-105 active:scale-95",children:"Jogar Novamente"})]}):O.jsxs("div",{children:[O.jsxs("p",{className:"text-lg text-gray-300 mb-4",children:["QuestÃ£o ",a+1," de ",t.length]}),O.jsx("p",{className:"text-xl font-semibold text-white mb-6",children:x.question}),O.jsx("div",{className:"grid grid-cols-1 gap-3 mb-6",children:x.options.map(e=>O.jsx("button",{onClick:()=>(e=>{u||(d(e),m(!0),e===t[a].answer&&o(e=>e+1))})(e),disabled:u,className:`p-3 rounded-lg text-white font-semibold transition-colors transform hover:scale-105 active:scale-95\n                                    ${u&&e===x.answer?"bg-green-600":""}\n                                    ${u&&e===c&&e!==x.answer?"bg-red-600":""}\n                                    ${u?"bg-gray-600 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}\n                                `,children:e},e))}),u&&O.jsx("button",{onClick:()=>{d(null),m(!1),a<t.length-1?r(e=>e+1):i(!0)},className:"px-6 py-3 bg-blue-600 rounded-lg text-white font-semibold hover:bg-blue-700 transition-colors transform hover:scale-105 active:scale-95",children:a<t.length-1?"PrÃ³xima QuestÃ£o":"Ver Resultado"})]})]})},Ae=({onBack:s})=>{const[t,a]=e.useState([]),[r,l]=e.useState([]),[o,n]=e.useState([]),[i,c]=e.useState(0),[d,u]=e.useState(!1),m=["ð®","ð¯","ð²","ðª","ð¨","ð­","ðº","ð¸"];e.useEffect(()=>{x()},[]);const x=()=>{const e=[...m,...m].sort(()=>Math.random()-.5).map((e,s)=>({id:s,symbol:e,flipped:!1}));a(e),l([]),n([]),c(0),u(!1)};return O.jsxs("div",{className:"p-4 bg-gray-800 rounded-lg shadow-lg text-center",children:[O.jsx("button",{onClick:s,className:"mb-4 p-2 rounded-full hover:bg-gray-700 transition-colors",children:O.jsx(Q,{className:"w-6 h-6 text-white"})}),O.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Jogo da MemÃ³ria"}),O.jsxs("p",{className:"text-lg text-gray-300 mb-4",children:["Movimentos: ",i]}),d&&O.jsxs("div",{className:"mb-4",children:[O.jsx("p",{className:"text-3xl font-extrabold text-green-400 mb-2",children:"ParabÃ©ns!"}),O.jsxs("p",{className:"text-lg text-white mb-4",children:["VocÃª completou o jogo em ",i," movimentos!"]})]}),O.jsx("div",{className:"grid grid-cols-4 gap-2 max-w-md mx-auto mb-6",children:t.map(e=>O.jsx("button",{onClick:()=>(e=>{var s,a;if(2===r.length||r.includes(e)||o.includes(e))return;const i=[...r,e];if(l(i),2===i.length){c(e=>e+1);const[e,r]=i;(null==(s=t.find(s=>s.id===e))?void 0:s.symbol)===(null==(a=t.find(e=>e.id===r))?void 0:a.symbol)?(n(s=>[...s,e,r]),l([]),o.length+2===t.length&&u(!0)):setTimeout(()=>{l([])},1e3)}})(e.id),className:"w-16 h-16 rounded-lg text-2xl font-bold transition-all duration-300 transform hover:scale-105 "+(r.includes(e.id)||o.includes(e.id)?"bg-blue-600 text-white":"bg-gray-600 text-gray-600 hover:bg-gray-500"),children:r.includes(e.id)||o.includes(e.id)?e.symbol:"?"},e.id))}),O.jsx("button",{onClick:x,className:"px-6 py-3 bg-green-600 rounded-lg text-white font-semibold hover:bg-green-700 transition-colors transform hover:scale-105 active:scale-95",children:"Novo Jogo"})]})},Te=({onBack:s})=>{const[t,a]=e.useState("0"),[r,l]=e.useState(null),[o,n]=e.useState(null),[i,c]=e.useState(!1),d=e=>{i?(a(String(e)),c(!1)):a("0"===t?String(e):t+e)},u=e=>{const s=parseFloat(t);if(null===r)l(s);else if(o){const e=m(r||0,s,o);a(String(e)),l(e)}c(!0),n(e)},m=(e,s,t)=>{switch(t){case"+":return e+s;case"-":return e-s;case"Ã":return e*s;case"Ã·":return e/s;default:return s}};return O.jsxs("div",{className:"p-4 bg-gray-800 rounded-lg shadow-lg text-center max-w-sm mx-auto",children:[O.jsx("button",{onClick:s,className:"mb-4 p-2 rounded-full hover:bg-gray-700 transition-colors",children:O.jsx(Q,{className:"w-6 h-6 text-white"})}),O.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Calculadora"}),O.jsx("div",{className:"bg-gray-900 p-4 rounded-lg mb-4",children:O.jsx("div",{className:"text-right text-3xl font-mono text-white break-all",children:t})}),O.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[O.jsx("button",{onClick:()=>{a("0"),l(null),n(null),c(!1)},className:"col-span-2 p-4 bg-red-600 rounded-lg text-white font-semibold hover:bg-red-700 transition-colors",children:"C"}),O.jsx("button",{onClick:()=>u("Ã·"),className:"p-4 bg-orange-600 rounded-lg text-white font-semibold hover:bg-orange-700 transition-colors",children:"Ã·"}),O.jsx("button",{onClick:()=>u("Ã"),className:"p-4 bg-orange-600 rounded-lg text-white font-semibold hover:bg-orange-700 transition-colors",children:"Ã"}),O.jsx("button",{onClick:()=>d(7),className:"p-4 bg-gray-600 rounded-lg text-white font-semibold hover:bg-gray-500 transition-colors",children:"7"}),O.jsx("button",{onClick:()=>d(8),className:"p-4 bg-gray-600 rounded-lg text-white font-semibold hover:bg-gray-500 transition-colors",children:"8"}),O.jsx("button",{onClick:()=>d(9),className:"p-4 bg-gray-600 rounded-lg text-white font-semibold hover:bg-gray-500 transition-colors",children:"9"}),O.jsx("button",{onClick:()=>u("-"),className:"p-4 bg-orange-600 rounded-lg text-white font-semibold hover:bg-orange-700 transition-colors",children:"-"}),O.jsx("button",{onClick:()=>d(4),className:"p-4 bg-gray-600 rounded-lg text-white font-semibold hover:bg-gray-500 transition-colors",children:"4"}),O.jsx("button",{onClick:()=>d(5),className:"p-4 bg-gray-600 rounded-lg text-white font-semibold hover:bg-gray-500 transition-colors",children:"5"}),O.jsx("button",{onClick:()=>d(6),className:"p-4 bg-gray-600 rounded-lg text-white font-semibold hover:bg-gray-500 transition-colors",children:"6"}),O.jsx("button",{onClick:()=>u("+"),className:"p-4 bg-orange-600 rounded-lg text-white font-semibold hover:bg-orange-700 transition-colors",children:"+"}),O.jsx("button",{onClick:()=>d(1),className:"p-4 bg-gray-600 rounded-lg text-white font-semibold hover:bg-gray-500 transition-colors",children:"1"}),O.jsx("button",{onClick:()=>d(2),className:"p-4 bg-gray-600 rounded-lg text-white font-semibold hover:bg-gray-500 transition-colors",children:"2"}),O.jsx("button",{onClick:()=>d(3),className:"p-4 bg-gray-600 rounded-lg text-white font-semibold hover:bg-gray-500 transition-colors",children:"3"}),O.jsx("button",{onClick:()=>{const e=parseFloat(t);if(null!==r&&o){const s=m(r,e,o);a(String(s)),l(null),n(null),c(!0)}},className:"row-span-2 p-4 bg-blue-600 rounded-lg text-white font-semibold hover:bg-blue-700 transition-colors",children:"="}),O.jsx("button",{onClick:()=>d(0),className:"col-span-2 p-4 bg-gray-600 rounded-lg text-white font-semibold hover:bg-gray-500 transition-colors",children:"0"}),O.jsx("button",{onClick:()=>a(t.includes(".")?t:t+"."),className:"p-4 bg-gray-600 rounded-lg text-white font-semibold hover:bg-gray-500 transition-colors",children:"."})]})]})},Je=({onBack:s})=>{const[t,a]=e.useState(1),[r,l]=e.useState(1),[o,n]=e.useState(!1),[i,c]=e.useState([]),d=e=>["â","â","â","â","â","â"][e-1];return O.jsxs("div",{className:"p-4 bg-gray-800 rounded-lg shadow-lg text-center",children:[O.jsx("button",{onClick:s,className:"mb-4 p-2 rounded-full hover:bg-gray-700 transition-colors",children:O.jsx(Q,{className:"w-6 h-6 text-white"})}),O.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Jogo de Dados"}),O.jsxs("div",{className:"flex justify-center gap-8 mb-6",children:[O.jsx("div",{className:"text-8xl "+(o?"animate-spin":""),children:d(t)}),O.jsx("div",{className:"text-8xl "+(o?"animate-spin":""),children:d(r)})]}),O.jsxs("div",{className:"text-2xl font-bold text-white mb-6",children:["Total: ",t+r]}),O.jsx("button",{onClick:()=>{n(!0);const e=setInterval(()=>{a(Math.floor(6*Math.random())+1),l(Math.floor(6*Math.random())+1)},100);setTimeout(()=>{clearInterval(e);const s=Math.floor(6*Math.random())+1,t=Math.floor(6*Math.random())+1;a(s),l(t),n(!1);const r=s+t;c(e=>[{dice1:s,dice2:t,total:r},...e.slice(0,4)])},1e3)},disabled:o,className:"px-8 py-4 bg-blue-600 rounded-lg text-white font-semibold hover:bg-blue-700 transition-colors transform hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed mb-6",children:o?"Rolando...":"Rolar Dados"}),i.length>0&&O.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg",children:[O.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"HistÃ³rico"}),i.map((e,s)=>O.jsxs("div",{className:"text-gray-300 text-sm",children:[d(e.dice1)," ",d(e.dice2)," = ",e.total]},s))]})]})},He=({onBack:s})=>{const[t,a]=e.useState(!1),[r,l]=e.useState(null),[o,n]=e.useState([]),[i,c]=e.useState({cara:0,coroa:0});return O.jsxs("div",{className:"p-4 bg-gray-800 rounded-lg shadow-lg text-center",children:[O.jsx("button",{onClick:s,className:"mb-4 p-2 rounded-full hover:bg-gray-700 transition-colors",children:O.jsx(Q,{className:"w-6 h-6 text-white"})}),O.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Cara ou Coroa"}),O.jsxs("div",{className:"mb-6",children:[O.jsx("div",{className:"text-8xl mb-4 "+(t?"animate-spin":""),children:t?"ðª":"cara"===r?"ð":"coroa"===r?"ð":"ðª"}),r&&!t&&O.jsxs("div",{className:"text-3xl font-bold text-blue-400 capitalize",children:[r,"!"]})]}),O.jsx("button",{onClick:()=>{a(!0),l(null),setTimeout(()=>{const e=Math.random()<.5?"cara":"coroa";l(e),a(!1),n(s=>[e,...s.slice(0,9)]),c(s=>({...s,[e]:s[e]+1}))},1500)},disabled:t,className:"px-8 py-4 bg-blue-600 rounded-lg text-white font-semibold hover:bg-blue-700 transition-colors transform hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed mb-6",children:t?"Girando...":"Girar Moeda"}),O.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[O.jsxs("div",{className:"bg-gray-700 p-3 rounded-lg",children:[O.jsx("div",{className:"text-2xl",children:"ð"}),O.jsxs("div",{className:"text-white font-semibold",children:["Cara: ",i.cara]})]}),O.jsxs("div",{className:"bg-gray-700 p-3 rounded-lg",children:[O.jsx("div",{className:"text-2xl",children:"ð"}),O.jsxs("div",{className:"text-white font-semibold",children:["Coroa: ",i.coroa]})]})]}),o.length>0&&O.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg",children:[O.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Ãltimos Resultados"}),O.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:o.map((e,s)=>O.jsx("span",{className:"text-2xl",children:"cara"===e?"ð":"ð"},s))})]})]})},Qe=({currentUser:s})=>{const[t,a]=e.useState([]),[r,l]=e.useState(""),[o,n]=e.useState(!0),[c,d]=e.useState(!1);e.useEffect(()=>{if(!(null==s?void 0:s.uid))return;const e=m(h(ve,"posts"),y("createdAt","desc"),w(50)),t=g(e,e=>{const s=e.docs.map(e=>({id:e.id,...e.data()}));a(s),n(!1)});return()=>t()},[s]);const x=e=>{if(!e)return"Agora";const s=new Date,t=e.toDate?e.toDate():new Date(e),a=Math.floor((s-t)/1e3);return a<60?"Agora":a<3600?`${Math.floor(a/60)}m`:a<86400?`${Math.floor(a/3600)}h`:`${Math.floor(a/86400)}d`};return o?O.jsx("div",{className:"flex items-center justify-center h-full",children:O.jsx(ae,{className:"animate-spin h-8 w-8 text-blue-400"})}):O.jsxs("div",{className:"h-full flex flex-col",children:[O.jsxs("div",{className:"p-4 border-b border-gray-700",children:[O.jsx("h2",{className:"text-2xl font-bold text-white",children:"SocialiD"}),O.jsx("p",{className:"text-gray-400 text-sm",children:"Sua rede social"})]}),O.jsx("div",{className:"p-4 border-b border-gray-700",children:O.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),r.trim()&&!c){d(!0);try{await B(h(ve,"posts"),{content:r.trim(),authorId:s.uid,authorName:s.displayName,authorPhoto:s.photoURL,createdAt:u(),likes:[],comments:[],shares:0}),l("")}catch(t){console.error("Erro ao criar post:",t),alert("Erro ao criar post. Tente novamente.")}finally{d(!1)}}},className:"space-y-3",children:[O.jsxs("div",{className:"flex gap-3",children:[O.jsx("img",{src:null==s?void 0:s.photoURL,alt:null==s?void 0:s.displayName,className:"w-10 h-10 rounded-full border-2 border-blue-500"}),O.jsx("textarea",{value:r,onChange:e=>l(e.target.value),placeholder:"O que estÃ¡ acontecendo?",className:"flex-1 p-3 rounded-lg bg-gray-700 border border-gray-600 text-white placeholder-gray-400 focus:outline-none focus:border-blue-500 resize-none",rows:"3",maxLength:"280"})]}),O.jsxs("div",{className:"flex justify-between items-center",children:[O.jsxs("span",{className:"text-sm text-gray-400",children:[280-r.length," caracteres restantes"]}),O.jsxs("button",{type:"submit",disabled:!r.trim()||c,className:"px-6 py-2 bg-blue-600 rounded-full text-white font-semibold hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[c?O.jsx(ae,{className:"w-4 h-4 animate-spin"}):O.jsx(ue,{className:"w-4 h-4"}),c?"Postando...":"Postar"]})]})]})}),O.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:0===t.length?O.jsxs("div",{className:"p-8 text-center",children:[O.jsx(oe,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),O.jsx("p",{className:"text-gray-400",children:"Nenhum post ainda. Seja o primeiro a postar!"})]}):O.jsx("div",{className:"space-y-1",children:t.map(e=>{var t,a,r;return O.jsx("div",{className:"p-4 border-b border-gray-700 hover:bg-gray-800/50 transition-colors",children:O.jsxs("div",{className:"flex gap-3",children:[O.jsx("img",{src:e.authorPhoto,alt:e.authorName,className:"w-10 h-10 rounded-full border-2 border-gray-600"}),O.jsxs("div",{className:"flex-1 min-w-0",children:[O.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[O.jsx("span",{className:"font-semibold text-white",children:e.authorName}),O.jsx("span",{className:"text-gray-400 text-sm",children:x(e.createdAt)}),e.authorId===(null==s?void 0:s.uid)&&O.jsx("button",{onClick:()=>(async e=>{if(confirm("Tem certeza que deseja excluir este post?"))try{await N(i(ve,"posts",e))}catch(s){console.error("Erro ao excluir post:",s),alert("Erro ao excluir post.")}})(e.id),className:"ml-auto p-1 text-gray-400 hover:text-red-400 transition-colors",children:O.jsx(he,{className:"w-4 h-4"})})]}),O.jsx("p",{className:"text-white break-words mb-3",children:e.content}),O.jsxs("div",{className:"flex items-center gap-6 text-gray-400",children:[O.jsxs("button",{onClick:()=>(async(e,t)=>{const a=i(ve,"posts",e),r=t.includes(s.uid);try{r?await M(a,{likes:z(s.uid)}):await M(a,{likes:E(s.uid)})}catch(l){console.error("Erro ao curtir post:",l)}})(e.id,e.likes||[]),className:"flex items-center gap-1 hover:text-red-400 transition-colors "+((null==(t=e.likes)?void 0:t.includes(null==s?void 0:s.uid))?"text-red-400":""),children:[O.jsx(W,{className:"w-4 h-4"}),O.jsx("span",{className:"text-sm",children:(null==(a=e.likes)?void 0:a.length)||0})]}),O.jsxs("button",{className:"flex items-center gap-1 hover:text-blue-400 transition-colors",children:[O.jsx(le,{className:"w-4 h-4"}),O.jsx("span",{className:"text-sm",children:(null==(r=e.comments)?void 0:r.length)||0})]}),O.jsxs("button",{className:"flex items-center gap-1 hover:text-green-400 transition-colors",children:[O.jsx(de,{className:"w-4 h-4"}),O.jsx("span",{className:"text-sm",children:e.shares||0})]})]})]})]})},e.id)})})})]})},Ge=()=>O.jsx(ke,{children:O.jsx(Re,{})});A.createRoot(document.getElementById("root")).render(O.jsx(t.StrictMode,{children:O.jsx(Ge,{})}));
